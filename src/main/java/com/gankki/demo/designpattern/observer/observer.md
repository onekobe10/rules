# 观察者模式 Observer Pattern （发布订阅模式 Publish/Subscribe）

Define a one-to-many dependency between objects so that when one object changes state,all its dependents are notified and updated automatically.

定义对象间一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新

#### 优点
1. 观察者模式和被观察者模式之间是抽象耦合
2. 建立一套触发机制

#### 缺点
1. 开发效率和运行效率问题

#### 使用场景
1. 关联行为场景。关联行为是可拆分的，而不是“组合”关系
2. 事件多级触发场景
3. 跨系统的消息交换场景，如消息队列的处理机制

#### 注意事项
1. 广播链问题
> A 传递 B，B 又传递给 C，形成了一条广播链
> 在一个观察者模式中，最好只有一个对象既是观察者又是被观察者，也就是说消息最多转发一次（传递两次），这样比较好控制
> 广播链和责任链的区别是观察者广播链在传播的过程中消息是随时可以更改的，它是由相邻的两个节点协商的消息结构；而责任链模式在消息传递过程中基本上保持了消息不可变，如果要改变，也只是在原有的消息上进行修正。
2. 异步处理问题
1. 如果观察者对被观察者的动作做出反应是同步的，观察者的处理过程可能比较长，一般使用异步，异步要考虑线程安全和队列的问题。



