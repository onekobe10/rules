# 模板方法模式 Template Method Pattern

Define the skeleton of an algorithm in an operation,deferring some steps to subclasses.Template
Method lets subclasses redefine certain steps of an algorithm without changing the algorithm's
structure.

定义一个操作中的算法的框架，而将一些步骤延迟到子类中实现。使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。

模板方法模式非常简单，只使用了java中继承机制，但是是一个使用非常广泛的模式。

**为了防止恶意的操作，一般父类中的模板方法都加上final关键字修饰，不允许重写。**

#### 模板方法模式的优点
1. 封装不变部分，扩展可变部分
2. 提取公共部分代码，便于维护
3. 行为由父类控制，子类负责实现细节

#### 模板方法模式的缺点
一般的思维是，抽象类负责声明最抽象、最一般的事物属性和方法，实现类完成具体的事物属性和方法。但是模板方法模式缺颠倒了，抽象类定义了部分抽象方法，由子类实现，子类执行的结果影响了父类的结果，也就是子类对父类产生了影响。

#### 模板方法模式的应用场景
1. 多个子类有公有的方法，并且逻辑基本相同
2. 重要、复杂的算法，可以将核心算法设计为模板方法，周边的相关细节功能由各个子类实现。
3. 重构时，模板方法模式是一个经常使用的模式，把相同的代码抽取到父类中，然后通过钩子函数约束其行为。

#### Gankki's Note
Java的容器应用了模板方法模式，一般会有一个AbstractClass，将共性的方法提前实现，而有些复杂的方法会包含一些基本方法，而这些基本方法一般为抽象方法，或者虽然实现了但是实现为空，或者返回异常等，这些基本方法依赖于子类的实现。