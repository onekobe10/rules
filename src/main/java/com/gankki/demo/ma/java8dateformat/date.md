# 日期相关

Java API中关于日期和时间，有三个主要的类：

Date：表示时刻，即绝对时间，与年月日无关。
> 1. 所有计算机系统内部都用一个整数表示时刻，这个整数是距离格林尼治标准时间1970年1月1日0时0分0秒的毫秒数。
> 2. 这个整数表示的是一个时刻，与时区无关，世界上各个地方都是同一个时刻，但各个地区对这个时刻的解读，如年月日时分秒，可能是不一样的。

如何表示1970年以前的时间呢？使用负数。
Calendar：表示年历，Calendar是一个抽象类，其中表示公历的子类是GregorianCalendar
> 1. 中国有公历和农历之分，公历和农历都是年历，不同的年历，一年有多少月，每月有多少天，甚至一天有多少小时，这些可能都是不一样的。

DateFormat：表示格式化，能够将日期和时间与字符串进行相互转换，DateFormat也是一个抽象类，其中最常用的子类是SimpleDateFormat。 
还有两个相关的类：
1. TimeZone: 表示时区
2. Locale: 表示国家和语言 

时刻是一个绝对时间，对时刻的解读，如年月日周时分秒等，则是相对的，与年历和时区相关。

#### Calendar
1. Calendar做了一项非常繁琐的工作，根据TimeZone和Locale，在绝对时间毫秒数和日历字段之间自动进行转换，且对不同日历字段的修改进行自动同步更新。
2. getInstance方法封装了Calendar对象创建的细节，TimeZone和Locale不同，具体的子类可能不同，但都是Calendar，这种隐藏对象创建细节的方式，是计算机程序中一种常见的设计模式，它有一个名字，叫工厂方法，getInstance就是一个工厂方法，它生产对象。

#### pattern yyyy-MM-dd HH:mm:ss SSS E a
1. yyyy：表示四位的年
2. MM：表示月，两位数表示
3. dd：表示日，两位数表示
4. HH：表示24小时制的小时数，两位数表示
5. hh 也表示小时数，但表示的是12小时制的小时数
6. mm：表示分钟，两位数表示
7. ss：表示秒，两位数表示
8. SSS：表示毫秒，三位数表示
9. E：表示星期几
10. a表示的是上午还是下午

pattern中的英文字符a-z和A-Z表示特殊含义, 如果想原样输出英文字符，可以用单引号括起来

DateFormat的线程安全性

DateFormat/SimpleDateFormat不是线程安全的，多个线程同时使用一个DateFormat实例的时候，会有问题，因为DateFormat内部使用了一个Calendar实例对象，多线程同时调用的时候，这个Calendar实例的状态可能就会紊乱。 

解决这个问题大概有以下方案：

1. 每次使用DateFormat都新建一个对象0
2. 使用线程同步
3. 使用ThreadLocal
4. 使用Joda-Time，Joda-Time是线程安全的